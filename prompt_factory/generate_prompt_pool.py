# Consider three key elements for VQA prompt fomat:
# {question} {context} {choices}
# For each element, there are 10 descriptions generated by LLM and manually filtered
# Combining these elements one by one and considering their relative positions
# Get a huge prompt pool: 6000 (10*10*10*6) different prompt templates.

import itertools
import json

questions = [
    "{question}",
    "Question: {question}",
    "Based on the image, answer the following question:\n{question}",
    "From the image, determine the following question:\n{question}",
    "Analyze the image and respond to this question: {question}",
    "Given the image, answer the question: {question}",
    "Based on what you see in the image, answer the question: {question}",
    "Considering the image, answer the following question:\n{question}",
    "Referring to the image, answer the following question:\n{question}",
    "From the given image, please give your answer to the question: {question}"
]

contexts = [
    "{context}",
    "Context: {context}",
    "Here's the context you need:\n{context}",
    "Consider this context:\n{context}",
    "The context is as follows:\n{context}",
    "Below is the context:\n{context}",
    "Here's the background information:\n{context}",
    "Given the context:\n{context}",
    "The provided context is:\n{context}",
    "Context information:\n{context}"
]

choices = [
    "{choices}",
    "Choices: {choices}",
    "Here are the options:\n{choices}",
    "Consider the following options:\n{choices}",
    "Below are the choices:\n{choices}",
    "The options are:\n{choices}",
    "Here are the possible answers:\n{choices}",
    "Given these options:\n{choices}",
    "The provided options are:\n{choices}",
    "Possible choices:\n{choices}"
]

elements = [questions, contexts, choices]

vqa_prompt_pool = []
for ordering in itertools.permutations(elements):
    for combination in itertools.product(*ordering):
        prompt = "\n".join(combination).strip()
        vqa_prompt_pool.append(prompt)

prompt_pool = {}
prompt_pool["MultiChoiceImageQa"]=vqa_prompt_pool
with open('./prompt_pool.json', "w", encoding='utf-8') as f:
    json.dump(prompt_pool, f, ensure_ascii=False, indent=4)

print(f"Generated {len(vqa_prompt_pool)} prompts.")

# print(vqa_prompt_pool[9])
